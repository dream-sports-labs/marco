---
import type { Props } from "@astrojs/starlight/props";

import { SITE } from "../constants";

const {
  entry: { id, data },
} = Astro.props;

const BASE_TITLE = "Marco";
const DESCRIPTION =
  "Track and optimize your app’s performance with ease.";
const META_IMAGE = `${SITE}/banner.png`

const googleAnalyticsId = process.env.GOOGLE_ANALYTICS_TOKEN;

if (!googleAnalyticsId) {
  console.log('❌ GA Token is missing!');
} else {
  console.log(
    '✅ GA Token Loaded:',
    googleAnalyticsId.substring(0, 4) + '****'
  );
}

let title = data.title;

if (!id) {
  title = `${BASE_TITLE} - ${DESCRIPTION}`;
} else {
  title = `${title} / ${BASE_TITLE}`;
}
---

<!-- HTML Meta Tags -->
<title>{title}</title>
<link
  rel="shortcut icon"
  href="/favicon.svg"
  sizes="any"
  title="Marco"
  type="image/svg+xml"
/>
<link rel="sitemap" href="/sitemap-index.xml" />
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="description" content={DESCRIPTION} />
<meta
  name="keywords"
  content="javascript, typescript, performance, rendering, tracker, measuring, react, time, benchmark, view"
/>

<!-- Facebook Meta Tags -->
<meta property="og:url" content={SITE} />
<meta property="og:type" content="website" />
<meta property="og:title" content={title} />
<meta property="og:description" content={DESCRIPTION} />
<meta property="og:image" content={META_IMAGE} />

<!-- Twitter Meta Tags -->
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:domain" content="marco.dreamsportslabs.com" />
<meta property="twitter:url" content={SITE} />
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={DESCRIPTION} />
<meta name="twitter:image" content={META_IMAGE} />
    <!-- Google tag (gtag.js) -->
<script
  async
  src=`https://www.googletagmanager.com/gtag/js?id=${googleAnalyticsId}`
></script>
<script is:inline>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());

  gtag("config", "${googleAnalyticsId}");
</script>
<slot />
